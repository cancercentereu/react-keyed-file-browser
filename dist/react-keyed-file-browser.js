!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["react-keyed-file-browser"]=t():e["react-keyed-file-browser"]=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("react-dnd")},function(e,t){e.exports=require("react-dnd-html5-backend")},function(e,t){e.exports=require("classnames")},function(e,t){e.exports=require("lodash/partition")},function(e,t){e.exports=require("lodash/isEqual")},function(e,t){e.exports=require("lodash/pick")},function(e,t){e.exports=require("lodash/union")},function(e,t,n){"use strict";n.r(t),n.d(t,"RawFileBrowser",(function(){return Mn})),n.d(t,"BaseFile",(function(){return be})),n.d(t,"BaseFileConnectors",(function(){return ye})),n.d(t,"BaseFolder",(function(){return vt})),n.d(t,"BaseFolderConnectors",(function(){return bt})),n.d(t,"Headers",(function(){return a})),n.d(t,"FileRenderers",(function(){return l})),n.d(t,"FolderRenderers",(function(){return c})),n.d(t,"Details",(function(){return r})),n.d(t,"Filters",(function(){return o})),n.d(t,"Groupers",(function(){return s})),n.d(t,"Sorters",(function(){return u})),n.d(t,"Icons",(function(){return f})),n.d(t,"Utils",(function(){return i}));var r={};n.r(r),n.d(r,"DefaultDetail",(function(){return E}));var o={};n.r(o),n.d(o,"DefaultFilter",(function(){return M}));var i={};n.r(i),n.d(i,"isFolder",(function(){return V})),n.d(i,"foldersFilesSplit",(function(){return G})),n.d(i,"moveFilesAndFolders",(function(){return H})),n.d(i,"moveFilesAndFoldersDrop",(function(){return $}));var a={};n.r(a),n.d(a,"TableHeader",(function(){return je}));var l={};n.r(l),n.d(l,"ListThumbnailFile",(function(){return qe})),n.d(l,"SimpleListThumbnailFile",(function(){return Qe})),n.d(l,"TableFile",(function(){return lt})),n.d(l,"RawListThumbnailFile",(function(){return Le})),n.d(l,"RawTableFile",(function(){return at}));var c={};n.r(c),n.d(c,"ListThumbnailFolder",(function(){return Tt})),n.d(c,"TableFolder",(function(){return zt})),n.d(c,"RawListThumbnailFolder",(function(){return At})),n.d(c,"RawTableFolder",(function(){return Wt}));var s={};n.r(s),n.d(s,"GroupByFolder",(function(){return Jt})),n.d(s,"GroupByModifiedRelative",(function(){return en}));var u={};n.r(u),n.d(u,"SortByName",(function(){return on})),n.d(u,"SortByModified",(function(){return an}));var f={};n.r(f),n.d(f,"FontAwesome",(function(){return Bn}));var p=n(1),d=n.n(p),h=n(0),m=n.n(h),y=n(4),b=n.n(y),v=n(3);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,r,o=S(i);function i(){var e;F(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleCloseClick=function(t){t&&t.preventDefault(),e.props.close()},e}return t=i,(n=[{key:"render",value:function(){var e=this.props.file.key.split("/");return e=e.length?e[e.length-1]:"",m.a.createElement("div",null,m.a.createElement("h2",null,"Item Detail"),m.a.createElement("dl",null,m.a.createElement("dt",null,"Key"),m.a.createElement("dd",null,this.props.file.key),m.a.createElement("dt",null,"Name"),m.a.createElement("dd",null,e)),m.a.createElement("a",{href:"#",onClick:this.handleCloseClick},"Close"))}}])&&w(t.prototype,n),r&&w(t,r),i}(m.a.Component);R.propTypes={file:d.a.shape({key:d.a.string.isRequired,name:d.a.string.isRequired,extension:d.a.string.isRequired,url:d.a.string}).isRequired,close:d.a.func};var E=R;function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(i,e);var t,n,r,o=A(i);function i(){var e;k(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleFilterChange=function(t){var n=t.target.value;e.props.updateFilter(n)},e}return t=i,(n=[{key:"render",value:function(){return m.a.createElement("input",{type:"search",placeholder:"Filter files",value:this.props.value,onChange:this.handleFilterChange})}}])&&C(t.prototype,n),r&&C(t,r),i}(m.a.Component);x.propTypes={value:d.a.string.isRequired,updateFilter:d.a.func};var M=x,I=n(5),K=n.n(I),B=n(6),L=n.n(B);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=z(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function z(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e){return e.key.endsWith("/")}function G(e){return L()(e,(function(e){return e.endsWith("/")}))}function H(e){var t=e.browserProps,n=e.folders,r=e.files,o=e.target;t.openFolder(o);function i(e){return!n.some((function(t){return t!=e&&e.startsWith(t)}))}r=r.filter(i),n=n.filter(i);var a,l=W(r);try{for(l.s();!(a=l.n()).done;){var c=a.value,s=c.split("/"),u=s[s.length-1],f="".concat(o).concat(u);f!==c&&t.moveFile&&t.moveFile(c,f)}}catch(e){l.e(e)}finally{l.f()}var p,d=W(n);try{for(d.s();!(p=d.n()).done;){var h=p.value,m=h.split("/"),y=m[m.length-2],b="".concat(o).concat(y,"/");if(b.substr(0,h.length)===h)return;b!==h&&t.moveFolder&&t.moveFolder(h,b)}}catch(e){d.e(e)}finally{d.f()}}function $(e,t,n){if(t.didDrop()){var r=t.getDropResult(),o=q(G(e.browserProps.selection),2),i=o[0],a=o[1];H({browserProps:e.browserProps,folders:i,files:a,target:r.path})}}function Y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}for(var Z={},ee=0,te=Object.entries({Archive:["zip","rar","7z"],Audio:["mp3","ogg","wav","aac"],Excel:["xls","xlsx"],Image:["jpg","jpeg","png","bmp"],PDF:["pdf"],PowerPoint:["ppt","pptx"],Text:["txt"],Video:["mp4","flv","avi","wmv","mov"],Word:["doc","docx"],Code:["js"]});ee<te.length;ee++){var ne,re=J(te[ee],2),oe=re[0],ie=Y(re[1]);try{for(ie.s();!(ne=ie.n()).done;){var ae=ne.value;Z[ae]=oe}}catch(e){ie.e(e)}finally{ie.f()}}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=de(e);if(t){var o=de(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(i,e);var t,n,r,o=fe(i);function i(){var e;ce(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={newName:e.getName()},e.handleFileClick=function(e){e&&e.preventDefault()},e.handleItemClick=function(t){t.stopPropagation(),e.props.browserProps.select(e.props.fileKey,"file",t.ctrlKey||t.metaKey,t.shiftKey)},e.handleItemDoubleClick=function(t){t.stopPropagation(),e.handleFileClick()},e.handleRenameClick=function(t){e.props.browserProps.renameFile&&e.props.browserProps.beginAction("rename",e.props.fileKey)},e.handleNewNameChange=function(t){var n=t.target.value;e.setState({newName:n})},e.handleRenameSubmit=function(t){if(t&&t.preventDefault(),e.props.browserProps.renameFile){var n=e.state.newName.trim();if(0!==n.length){if(!["/","\\"].some((function(e){return-1!==n.indexOf(e)}))){var r=n,o=e.props.fileKey.lastIndexOf("/");-1!==o&&(r="".concat(e.props.fileKey.substr(0,o),"/").concat(n)),e.props.browserProps.renameFile(e.props.fileKey,r)}}}},e.handleDeleteClick=function(t){e.props.browserProps.deleteFile&&e.props.browserProps.beginAction("delete",e.props.fileKey)},e.handleDeleteSubmit=function(t){t.preventDefault(),e.props.browserProps.deleteFile&&e.props.browserProps.deleteFile(e.props.browserProps.actionTargets)},e.handleCancelEdit=function(t){e.props.browserProps.endAction()},e}return t=i,(n=[{key:"selectFileNameFromRef",value:function(e){if(e){var t=e.value,n=t.lastIndexOf(".");e.setSelectionRange(0,n||t.length),e.focus()}}},{key:"getName",value:function(){var e=this.props.newKey||this.props.fileKey,t=e.lastIndexOf("/");return-1!==t&&(e=e.substr(t+1)),e}},{key:"getExtension",value:function(){var e=this.props.fileKey.split(".");return e[e.length-1].toLowerCase().trim()}},{key:"getFileType",value:function(){return Z[this.getExtension()]||"File"}},{key:"connectDND",value:function(e){var t=this.props.isDragging||this.props.action;return"function"!=typeof this.props.browserProps.moveFile||t||this.props.isRenaming||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFile&&"function"!=typeof this.props.browserProps.moveFolder||(e=this.props.connectDropTarget(e)),e}}])&&se(t.prototype,n),r&&se(t,r),i}(m.a.PureComponent);he.propTypes={fileKey:d.a.string,url:d.a.string,newKey:d.a.string,isRenaming:d.a.bool,connectDragSource:d.a.func,connectDropTarget:d.a.func,isDragging:d.a.bool,action:d.a.string,browserProps:d.a.shape({icons:d.a.object,select:d.a.func,beginAction:d.a.func,endAction:d.a.func,createFiles:d.a.func,moveFile:d.a.func,moveFolder:d.a.func,renameFile:d.a.func,deleteFile:d.a.func})};var me,ye={dragSource:{beginDrag:function(e){return e.browserProps.selection.length&&e.browserProps.selection.includes(e.fileKey)||e.browserProps.select(e.fileKey,"file"),{key:e.fileKey}},endDrag:function(e,t,n){$(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}},targetSource:{drop:function(e,t){if(!t.didDrop()){var n=e.newKey||e.fileKey,r=n.lastIndexOf("/"),o=-1!==r?n.substr(0,r+1):"",i=t.getItem();return i.files&&e.browserProps.createFiles&&e.browserProps.createFiles(i.files,o),{path:o}}}},targetCollect:function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}}},be=he;function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pe(e);if(t){var o=Pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){we(i,e);var t,n,r,o=Se(i);function i(){return ge(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"handleHeaderClick",value:function(e){this.props.select(this.props.fileKey)}},{key:"render",value:function(){var e=m.a.createElement("tr",{className:K()("folder",{dragover:this.props.isOver,selected:this.props.isSelected})},m.a.createElement("th",null,"File"),m.a.createElement("th",{className:"size"},"Size"),m.a.createElement("th",{className:"modified"},"Last Modified"));return"function"==typeof this.props.browserProps.createFiles||"function"==typeof this.props.browserProps.moveFile||"function"==typeof this.props.browserProps.moveFolder?this.props.connectDropTarget(e):e}}])&&Fe(t.prototype,n),r&&Fe(t,r),i}(m.a.Component);Re.propTypes={select:d.a.func,fileKey:d.a.string,connectDropTarget:d.a.func,isOver:d.a.bool,isSelected:d.a.func,browserProps:d.a.shape({createFiles:d.a.func,moveFolder:d.a.func,moveFile:d.a.func})};var Ee,je=Object(v.DropTarget)(["file","folder",y.NativeTypes.FILE],ye.targetSource,ye.targetCollect)(me=function(e){we(n,e);var t=Se(n);function n(){return ge(this,n),t.apply(this,arguments)}return n}(Re))||me,ke=n(2);function Ce(e){if(e>1024){var t=e/1024;return t>1024?"".concat(function(e,t){if(e=parseFloat(e),isNaN(e))return parseFloat("0").toFixed(t);var n=Math.pow(10,t);return(e=(Math.round(e*n)/n).toFixed(t)).toString()}(t/1024,2)," MB"):"".concat(Math.round(t)," kB")}return"".concat(e," B")}function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Be(e);if(t){var o=Be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ke(this,n)}}function Ke(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Le=function(e){xe(i,e);var t,n,r,o=Ie(i);function i(){return Te(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t=this.props,n=t.thumbnail_url,r=t.action,o=t.url,i=t.isDragging,a=t.isRenaming,l=t.isSelected,c=t.isSelectable,s=t.isOver,u=t.isDeleting,f=t.showName,p=t.showSize,d=t.showModified,h=t.browserProps,y=t.connectDragPreview;e=n?m.a.createElement("div",{className:"image",style:{backgroundImage:"url("+n+")"}}):h.icons[this.getFileType()]||h.icons.File;var b,v,g,F=i||r,w=h.confirmDeletionRenderer;f&&(b=!F&&u&&1===h.selection.length?m.a.createElement(w,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:o},this.getName()):!F&&a?m.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},m.a.createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):m.a.createElement("a",{href:o,download:"download",onClick:this.handleFileClick},this.getName())),p&&(a||u||(v=m.a.createElement("span",{className:"size"},m.a.createElement("small",null,Ce(this.props.size))))),d&&(a||u||(g=m.a.createElement("span",{className:"modified"},"Last modified: ",Object(ke.formatDistanceToNow)(this.props.modified,{addSuffix:!0}))));var O={};c&&(O={onClick:this.handleItemClick});var S=m.a.createElement("li",Ae({className:K()("file",{pending:r,dragging:i,dragover:s,selected:l}),onDoubleClick:this.handleItemDoubleClick},O),m.a.createElement("div",{className:"item"},m.a.createElement("span",{className:"thumb"},e),m.a.createElement("span",{className:"name"},b),v,g));return"function"==typeof h.moveFile&&(S=y(S)),this.connectDND(S)}}])&&_e(t.prototype,n),r&&_e(t,r),i}(be);Le.defaultProps={showName:!0,showSize:!0,showModified:!0,isSelectable:!0};var qe=Object(v.DragSource)("file",ye.dragSource,ye.dragCollect)(Ee=Object(v.DropTarget)(["file","folder",y.NativeTypes.FILE],ye.targetSource,ye.targetCollect)(Ee=function(e){xe(n,e);var t=Ie(n);function n(){return Te(this,n),t.apply(this,arguments)}return n}(Le))||Ee)||Ee;function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ye(e);if(t){var o=Ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je,Qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(i,e);var t,n,r,o=He(i);function i(){return Ue(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return m.a.createElement(qe,ze({},this.props,{showName:!1,showSize:!1,showModified:!1,isSelectable:!1}))}}])&&Ve(t.prototype,n),r&&Ve(t,r),i}(m.a.Component);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=it(e);if(t){var o=it(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ot(this,n)}}function ot(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var at=function(e){tt(i,e);var t,n,r,o=rt(i);function i(){return Ze(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t=this.props,n=t.isDragging,r=t.isDeleting,o=t.isRenaming,i=t.isOver,a=t.isSelected,l=t.action,c=t.url,s=t.browserProps,u=t.connectDragPreview,f=t.depth,p=t.size,d=t.modified,h=s.icons[this.getFileType()]||s.icons.File,y=n||l,b=s.confirmDeletionRenderer;e=!y&&r&&1===s.selection.length?m.a.createElement(b,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:c},h,this.getName()):!y&&o?m.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h,m.a.createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):m.a.createElement("a",{href:c||"#",download:"download",onClick:this.handleFileClick},h,this.getName());var v=m.a.createElement("div",null,e);"function"==typeof s.moveFile&&(v=u(v));var g=m.a.createElement("tr",{className:K()("file",{pending:l,dragging:n,dragover:i,selected:a}),onClick:this.handleItemClick,onDoubleClick:this.handleItemDoubleClick},m.a.createElement("td",{className:"name"},m.a.createElement("div",{style:{paddingLeft:16*f+"px"}},v)),m.a.createElement("td",{className:"size"},Ce(p)),m.a.createElement("td",{className:"modified"},void 0===d?"-":Object(ke.formatDistanceToNow)(d,{addSuffix:!0})));return this.connectDND(g)}}])&&et(t.prototype,n),r&&et(t,r),i}(be),lt=Object(v.DragSource)("file",ye.dragSource,ye.dragCollect)(Je=Object(v.DropTarget)(["file","folder",y.NativeTypes.FILE],ye.targetSource,ye.targetCollect)(Je=function(e){tt(n,e);var t=rt(n);function n(){return Ze(this,n),t.apply(this,arguments)}return n}(at))||Je)||Je;function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ht(e);if(t){var o=ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dt(this,n)}}function dt(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(i,e);var t,n,r,o=pt(i);function i(){var e;st(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={newName:e.props.isDraft?"New folder":e.getName()},e.handleFolderClick=function(t){t.stopPropagation(),e.props.browserProps.select(e.props.fileKey,"folder",t.ctrlKey||t.metaKey,t.shiftKey)},e.handleFolderDoubleClick=function(t){t.stopPropagation(),e.toggleFolder()},e.handleRenameClick=function(t){e.props.browserProps.renameFolder&&e.props.browserProps.beginAction("rename",e.props.fileKey)},e.handleNewNameChange=function(t){var n=t.target.value;e.setState({newName:n})},e.handleRenameSubmit=function(t){if(t.preventDefault(),e.props.browserProps.renameFolder||e.props.isDraft){var n=e.state.newName.trim();if(0!==n.length){if(!["/","\\"].some((function(e){return-1!==n.indexOf(e)}))){var r=e.props.fileKey.substr(0,e.props.fileKey.substr(0,e.props.fileKey.length-1).lastIndexOf("/"));r.length&&(r+="/"),r+=n,r+="/",e.props.isDraft?e.props.browserProps.createFolder(r):e.props.browserProps.renameFolder(e.props.fileKey,r)}}}},e.handleDeleteClick=function(t){e.props.browserProps.deleteFolder&&e.props.browserProps.beginAction("delete",e.props.fileKey)},e.handleDeleteSubmit=function(t){t.preventDefault(),e.props.browserProps.deleteFolder&&e.props.browserProps.deleteFolder(e.props.browserProps.actionTargets)},e.handleCancelEdit=function(t){e.props.browserProps.endAction()},e.toggleFolder=function(){e.props.browserProps.toggleFolder(e.props.fileKey)},e}return t=i,(n=[{key:"selectFolderNameFromRef",value:function(e){if(e){var t=e.value;e.setSelectionRange(0,t.length),e.focus()}}},{key:"getName",value:function(){if(this.props.name)return this.props.name;var e=this.props.fileKey.split("/");return this.props.newName||e[e.length-2]}},{key:"connectDND",value:function(e){var t=this.props.isDragging||this.props.action;return this.props.keyDerived&&("function"!=typeof this.props.browserProps.moveFolder||t||this.props.isRenaming||this.props.isDeleting||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFolder&&"function"!=typeof this.props.browserProps.moveFile||(e=this.props.connectDropTarget(e))),e}}])&&ut(t.prototype,n),r&&ut(t,r),i}(m.a.PureComponent);mt.propTypes={name:d.a.string,fileKey:d.a.string,newName:d.a.string,keyDerived:d.a.bool,isDraft:d.a.bool,isRenaming:d.a.bool,isDeleting:d.a.bool,connectDragSource:d.a.func,connectDropTarget:d.a.func,isDragging:d.a.bool,action:d.a.string,browserProps:d.a.shape({select:d.a.func,toggleFolder:d.a.func,beginAction:d.a.func,endAction:d.a.func,createFiles:d.a.func,createFolder:d.a.func,moveFile:d.a.func,moveFolder:d.a.func,renameFolder:d.a.func,deleteFolder:d.a.func})};var yt,bt={dragSource:{beginDrag:function(e){return e.browserProps.selection.length||e.browserProps.select(e.fileKey,"folder"),{key:e.fileKey}},endDrag:function(e,t,n){$(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}},vt=mt;function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(){return(Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){St(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ct(e);if(t){var o=Ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kt(this,n)}}function kt(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nt,At=function(e){Rt(i,e);var t,n,r,o=jt(i);function i(){return Dt(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t,n=this.props,r=n.isOpen,o=n.isDragging,i=n.isDeleting,a=n.isRenaming,l=n.isDraft,c=n.isOver,s=n.isSelected,u=n.url,f=n.action,p=n.browserProps,d=n.depth,h=n.keyDerived,y=n.connectDragPreview,b=p.icons[r?"FolderOpen":"Folder"],v=o||f,g=p.confirmDeletionRenderer;if(e=!v&&i&&1===p.selection.length?m.a.createElement(g,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:u},this.getName()):!v&&a||l?m.a.createElement("div",null,m.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},m.a.createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):m.a.createElement("div",null,m.a.createElement("a",{onClick:this.toggleFolder},this.getName())),r&&p.nestChildren){t=[];for(var F=0;F<t.length;F++){var w=t[F],O=Ot(Ot({},p.getItemProps(w,p)),{},{depth:d+1});V(w)?t.push(m.a.createElement(p.folderRenderer,Ft({},w,O,{browserProps:p},p.folderRendererProps))):t.push(m.a.createElement(p.fileRenderer,Ft({},w,O,{browserProps:p},p.fileRendererProps)))}t=t.length?m.a.createElement("ul",{style:{padding:"0 8px",paddingLeft:"16px"}},t):m.a.createElement("p",null,"No items in this folder")}var S=m.a.createElement("li",{className:K()("folder",{expanded:r&&p.nestChildren,pending:f,dragging:o,dragover:c,selected:s}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},m.a.createElement("div",{className:"item"},m.a.createElement("span",{className:"thumb"},b),m.a.createElement("span",{className:"name"},e)),t);return"function"==typeof p.moveFolder&&h&&(S=y(S)),this.connectDND(S)}}])&&Pt(t.prototype,n),r&&Pt(t,r),i}(vt),Tt=Object(v.DragSource)("folder",bt.dragSource,bt.dragCollect)(yt=Object(v.DropTarget)(["file","folder",y.NativeTypes.FILE],ye.targetSource,ye.targetCollect)(yt=function(e){Rt(n,e);var t=jt(n);function n(){return Dt(this,n),t.apply(this,arguments)}return n}(At))||yt)||yt;function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qt(e);if(t){var o=qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wt=function(e){It(i,e);var t,n,r,o=Bt(i);function i(){return xt(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t=this.props,n=t.isOpen,r=t.isDragging,o=t.isDeleting,i=t.isRenaming,a=t.isDraft,l=t.isOver,c=t.isSelected,s=t.action,u=t.url,f=t.browserProps,p=t.connectDragPreview,d=t.depth,h=f.icons[n?"FolderOpen":"Folder"],y=r||s,b=f.confirmDeletionRenderer;e=!y&&o&&1===f.selection.length?m.a.createElement(b,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:u},h,this.getName()):!y&&i||a?m.a.createElement("div",null,m.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h,m.a.createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):m.a.createElement("div",null,m.a.createElement("a",{onClick:this.toggleFolder},h,this.getName()));var v=m.a.createElement("div",null,e);"function"==typeof f.moveFile&&(v=p(v));var g=m.a.createElement("tr",{className:K()("folder",{pending:s,dragging:r,dragover:l,selected:c}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},m.a.createElement("td",{className:"name"},m.a.createElement("div",{style:{paddingLeft:16*d+"px"}},v)),m.a.createElement("td",null),m.a.createElement("td",null));return this.connectDND(g)}}])&&Mt(t.prototype,n),r&&Mt(t,r),i}(vt),zt=Object(v.DragSource)("folder",bt.dragSource,bt.dragCollect)(Nt=Object(v.DropTarget)(["file","folder",y.NativeTypes.FILE],ye.targetSource,ye.targetCollect)(Nt=function(e){It(n,e);var t=Bt(n);function n(){return xt(this,n),t.apply(this,arguments)}return n}(Wt))||Nt)||Nt,Ut=function(e){var t=e.children,n=e.handleDeleteSubmit,r=e.handleFileClick,o=e.url;return m.a.createElement("form",{className:"deleting",onSubmit:n},m.a.createElement("a",{href:o,download:"download",onClick:r},t),m.a.createElement("div",null,m.a.createElement("button",{type:"submit"},"Confirm Deletion")))};Ut.propTypes={children:d.a.node,handleDeleteSubmit:d.a.func,handleFileClick:d.a.func,url:d.a.string},Ut.defaultProps={url:"#"};var Vt=function(e){var t=e.handleDeleteSubmit;return m.a.createElement("button",{className:"deleting",onClick:t},"Confirm Deletion")};Vt.propTypes={handleDeleteSubmit:d.a.func};var Gt=Vt;function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=function(e,t){var n={contents:[],children:{}};return e.map((function(e){e.relativeKey=(e.newKey||e.key).substr(t.length);var r=n,o=e.relativeKey.split("/");o.map((function(t,n){if(n===o.length-1&&V(e))for(var i in e)r[i]=e[i];""!==t&&(!V(e)&&n===o.length-1?r.contents.push($t($t({},e),{},{keyDerived:!0})):(t in r.children==!1&&(r.children[t]={contents:[],children:{}}),r=r.children[t]))}))})),e=function e(n,r){""!==r&&(r+="/");var o=[];for(var i in n.children)o.push($t($t({},n.children[i]),{},{contents:void 0,keyDerived:!0,key:t+r+i+"/",relativeKey:r+i+"/",children:e(n.children[i],r+i),size:0}));return o=o.concat(n.contents)}(n,"")};function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var en=function(e,t){for(var n,r,o=(n=[],r=new Date,n.push({name:"Today",begins:Object(ke.startOfToday)(),ends:Object(ke.endOfToday)(),items:[]}),n.push({name:"Yesterday",begins:Object(ke.startOfYesterday)(),ends:Object(ke.endOfYesterday)(),items:[]}),n.push({name:"Earlier this Week",begins:Object(ke.startOfWeek)(r),ends:Object(ke.endOfWeek)(r),items:[]}),n.push({name:"Last Week",begins:Object(ke.startOfWeek)(Object(ke.addWeeks)(r,-1)),ends:Object(ke.endOfWeek)(Object(ke.addWeeks)(r,-1)),items:[]}),Object(ke.getMonth)(n[n.length-1].begins)===Object(ke.getMonth)(r)&&n.push({name:"Earlier this Month",begins:Object(ke.startOfMonth)(r),ends:Object(ke.endOfMonth)(r),items:[]}),n),i=0;i<e.length;i++){var a=e[i];if(!V(a)){for(var l=Xt(Xt({},a),{},{keyDerived:!0}),c=!1,s=+l.modified,u=0;u<o.length;u++){var f=o[u];if(s>+f.begins&&s<=+f.ends){f.items.push(l),c=!0;break}}if(!c){var p={name:Object(ke.format)(l.modified,"MMMM yyyy"),begins:Object(ke.startOfMonth)(l.modified),ends:Object(ke.endOfMonth)(l.modified),items:[]};p.items.push(l),o.push(p)}}}for(var d=[],h=0;h<o.length;h++){var m=o[h];m.items.length&&d.push({key:"".concat(m.name.toLowerCase().replace(" ","_"),"/"),name:m.name,children:m.items,size:0})}return d},tn=/(-?\d*\.?\d+)/g;function nn(e,t){for(var n=String(e.name).split(tn),r=String(t.name).split(tn),o=Math.min(n.length,r.length),i=0;i<o;i++){var a=parseFloat(n[i])||n[i].toLowerCase(),l=parseFloat(r[i])||r[i].toLowerCase();if(a<l)return-1;if(a>l)return 1}return 0}function rn(e,t){return e.draft&&!t.draft?1:t.draft&&!e.draft?-1:nn(e,t)}var on=function(e){return function e(t){for(var n=[],r=[],o=0;o<t.length;o++){var i=t[o],a=(i.newKey||i.key).split("/");i.children?(i.name||(i.name=a[a.length-2]),n.push(i)):(i.name||(i.name=a[a.length-1]),r.push(i))}r=r.sort(nn),n=n.sort(rn);for(var l=0;l<n.length;l++){var c=n[l];c.children=e(c.children)}var s=[];return s=(s=s.concat(n)).concat(r)}(e)};var an=function(e){return function e(t){for(var n=[],r=[],o=0;o<t.length;o++){var i=t[o],a=(i.newKey||i.key).split("/");i.children?n.push(i):(i.name=a[a.length-1],r.push(i))}r=r.sort(ke.compareAsc);for(var l=0;l<n.length;l++){var c=n[l];c.children=e(c.children)}var s=[];return s=(s=s.concat(n)).concat(r)}(e)};function ln(e){return function(e){if(Array.isArray(e))return cn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sn=function(e){var t=e.selectedItems,n=e.isFolder,r=e.icons,o=e.nameFilter,i=e.canCreateFolder,a=e.onCreateFolder,l=e.canRenameFile,c=e.onRenameFile,s=e.canRenameFolder,u=e.onRenameFolder,f=e.canDeleteFile,p=e.onDeleteFile,d=e.canDeleteFolder,h=e.onDeleteFolder,y=e.canDownloadFile,b=e.onDownloadFile,v=e.canDownloadFolder,g=e.onDownloadFolder,F=[];if(t.length){var w=t.filter((function(e){return e.action}));if(w.length===t.length&&1===ln(new Set(w)).length){var O;switch(w[0].action){case"delete":O="Deleting ...";break;case"rename":O="Renaming ...";break;default:O="Moving ..."}F=m.a.createElement("div",{className:"item-actions"},r.Loading," ",O)}else{n&&i&&!o&&F.push(m.a.createElement("li",{key:"action-add-folder"},m.a.createElement("a",{onClick:a,href:"#",role:"button"},r.Folder," Add Subfolder")));var S=t.find((function(e){return!e.keyDerived}));S||n||!l||1!==t.length?!S&&n&&s&&F.push(m.a.createElement("li",{key:"action-rename"},m.a.createElement("a",{onClick:u,href:"#",role:"button"},r.Rename," Rename"))):F.push(m.a.createElement("li",{key:"action-rename"},m.a.createElement("a",{onClick:c,href:"#",role:"button"},r.Rename," Rename"))),S||n||!f?!S&&n&&d&&F.push(m.a.createElement("li",{key:"action-delete"},m.a.createElement("a",{onClick:h,href:"#",role:"button"},r.Delete," Delete"))):F.push(m.a.createElement("li",{key:"action-delete"},m.a.createElement("a",{onClick:p,href:"#",role:"button"},r.Delete," Delete"))),(!n&&y||n&&v)&&F.push(m.a.createElement("li",{key:"action-download"},m.a.createElement("a",{onClick:n?g:b,href:"#",role:"button"},r.Download," Download"))),F=F.length?m.a.createElement("ul",{className:"item-actions"},F):m.a.createElement("div",{className:"item-actions"}," ")}}else i&&!o&&F.push(m.a.createElement("li",{key:"action-add-folder"},m.a.createElement("a",{onClick:a,href:"#",role:"button"},r.Folder," Add Folder"))),F=F.length?m.a.createElement("ul",{className:"item-actions"},F):m.a.createElement("div",{className:"item-actions"}," ");return F};sn.propTypes={selectedItems:d.a.arrayOf(d.a.object),isFolder:d.a.bool,icons:d.a.object,nameFilter:d.a.string,canCreateFolder:d.a.bool,onCreateFolder:d.a.func,canRenameFile:d.a.bool,onRenameFile:d.a.func,canRenameFolder:d.a.bool,onRenameFolder:d.a.func,canDeleteFile:d.a.bool,onDeleteFile:d.a.func,canDeleteFolder:d.a.bool,onDeleteFolder:d.a.func,canDownloadFile:d.a.bool,onDownloadFile:d.a.func,canDownloadFolder:d.a.bool,onDownloadFolder:d.a.func},sn.defaultProps={selectedItems:[],isFolder:!1,icons:{},nameFilter:"",canCreateFolder:!1,onCreateFolder:null,canRenameFile:!1,onRenameFile:null,canRenameFolder:!1,onRenameFolder:null,canDeleteFile:!1,onDeleteFile:null,canDeleteFolder:!1,onDeleteFolder:null,canDownloadFile:!1,onDownloadFile:null,canDownloadFolder:!1,onDownloadFolder:null};var un,fn=sn,pn=n(7),dn=n.n(pn),hn=n(8),mn=n.n(hn),yn=n(9),bn=n.n(yn);function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||On(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wn(e){return function(e){if(Array.isArray(e))return Sn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||On(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(e,t){if(e){if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(e,t):void 0}}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){Rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tn(e);if(t){var o=Tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return An(this,n)}}function An(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _n=/.*\/__new__[/]?$/gm;function xn(e,t){return{key:"file-".concat(e.key),fileKey:e.key,isSelected:t.selection.includes(e.key),isOpen:e.key in t.openFolders||t.nameFilter,isRenaming:"rename"===t.activeAction&&t.actionTargets.includes(e.key),isDeleting:"delete"===t.activeAction&&t.actionTargets.includes(e.key),isDraft:!!e.draft}}var Mn=function(e){kn(i,e);var t,n,r,o=Nn(i);function i(){var e;En(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={openFolders:{},selection:[],activeAction:null,actionTargets:[],nameFilter:"",searchResultsShown:20,addFolder:null},e.getFile=function(t){var n=!1,r=e.props.files.find((function(e){return e.key.startsWith(t)&&(n=!0),e.key===t}));return r||(n?{key:t,modified:0,size:0,relativeKey:t}:void 0)},e.createFiles=function(t,n){e.setState((function(e){var t={selection:[]};return n&&(t.openFolders=Pn(Pn({},e.openFolders),{},Rn({},n,!0))),t}),(function(){e.props.onCreateFiles(t,n)}))},e.createFolder=function(t){e.setState({activeAction:null,actionTargets:[],selection:[t]},(function(){e.props.onCreateFolder(t)}))},e.moveFile=function(t,n){e.setState({activeAction:null,actionTargets:[],selection:[n]},(function(){e.props.onMoveFile(t,n)}))},e.moveFolder=function(t,n){e.setState((function(e){var r={activeAction:null,actionTargets:[],selection:[n]};return t in e.openFolders&&(r.openFolders=Pn(Pn({},e.openFolders),{},Rn({},n,!0))),r}),(function(){e.props.onMoveFolder(t,n)}))},e.renameFile=function(t,n){e.setState({activeAction:null,actionTargets:[],selection:[n]},(function(){e.props.onRenameFile(t,n)}))},e.renameFolder=function(t,n){e.setState((function(e){var r={activeAction:null,actionTargets:[]};return e.selection[0].substr(0,t.length)===t&&(r.selection=[e.selection[0].replace(t,n)]),t in e.openFolders&&(r.openFolders=Pn(Pn({},e.openFolders),{},Rn({},n,!0))),r}),(function(){e.props.onRenameFolder(t,n)}))},e.deleteFile=function(t){e.setState({activeAction:null,actionTargets:[],selection:[]},(function(){e.props.onDeleteFile(t)}))},e.deleteFolder=function(t){e.setState((function(e){var n={activeAction:null,actionTargets:[],selection:[]};return t in e.openFolders&&(n.openFolders=Pn({},e.openFolders),delete n.openFolders[t]),n}),(function(){e.props.onDeleteFolder(t)}))},e.downloadFile=function(t){e.setState({activeAction:null,actionTargets:[]},(function(){e.props.onDownloadFile(t)}))},e.downloadFolder=function(t){e.setState({activeAction:null,actionTargets:[]},(function(){e.props.onDownloadFolder(t)}))},e.beginAction=function(t,n){e.setState({activeAction:t,actionTargets:n||[]})},e.endAction=function(){e.state.selection&&e.state.selection.length>0&&e.state.selection.filter((function(e){return e.match(_n)})).length>0&&e.setState({selection:[]}),e.beginAction(null,null)},e.select=function(t,n,r,o,i){var a=e.state.actionTargets,l=a.length&&!a.includes(t),c=[t],s=t,u=e.state.selection.indexOf(t),f=r||o&&!e.state.lastSelected,p=!f&&o;if(f&&e.props.multipleSelection)-1!==u?(c=[].concat(wn(e.state.selection.slice(0,u)),wn(e.state.selection.slice(u+1))),s=null):c=[].concat(wn(e.state.selection),[t]);else if(p&&e.props.multipleSelection){var d=e.getVisibleFiles(),h=d.findIndex((function(t){return t.key===e.state.lastSelected})),m=d.findIndex((function(e){return e.key===t}));if(h>m){var y=[m,h];h=y[0],m=y[1]}var b=d.slice(h,m+1).map((function(e){return e.key}));c=bn()(e.state.selection,b)}else i||-1===u||(c=[],s=null);return e.setState((function(e){return{selection:c,lastSelected:s,actionTargets:l?[]:a,activeAction:l?null:e.activeAction}})),c},e.setSelection=function(t,n){e.setState({selection:t,lastSelected:n,actionTargets:[],activeAction:null})},e.handleShowMoreClick=function(t){t.preventDefault(),e.setState((function(e){return{searchResultsShown:e.searchResultsShown+20}}))},e.toggleFolder=function(t){var n=t in e.state.openFolders;e.setState((function(e){var r={openFolders:Pn({},e.openFolders)};return n?delete r.openFolders[t]:r.openFolders[t]=!0,r}),(function(){var r=n?"onFolderClose":"onFolderOpen";e.props[r](e.getFile(t))}))},e.openFolder=function(t){e.setState((function(e){return{openFolders:Pn(Pn({},e.openFolders),{},Rn({},t,!0))}}),(function(){e.props.onFolderOpen(e.getFile(t))}))},e.handleGlobalClick=function(t){!((!e.browserRef||!e.browserRef.contains(t.target))&&document.getElementById("root").contains(t.target))||null!=e.state.activeAction&&"rename"!==e.state.activeAction||e.setState({selection:[],actionTargets:[],activeAction:null})},e.handleActionBarRenameClick=function(t){t.preventDefault(),e.beginAction("rename",e.state.selection)},e.handleActionBarDeleteClick=function(t){t.preventDefault(),e.beginAction("delete",e.state.selection)},e.handleActionBarAddFolderClick=function(t){t.preventDefault(),"createFolder"!==e.state.activeAction&&e.setState((function(e){var t="";e.selection&&e.selection.length>0&&"/"!==(t+=e.selection).substr(t.length-1,t.length)&&(t+="/"),"__new__/"===t||t.endsWith("/__new__/")||(t+="__new__/");var n={actionTargets:[t],activeAction:"createFolder",selection:[t]};return e.selection&&e.selection.length>0&&(n.openFolders=e.openFolders,e.selection.forEach((function(e){return n.openFolders[e]=!0}))),n}))},e.handleActionBarDownloadClick=function(t){t.preventDefault();var n=e.getFiles(),r=e.getSelectedItems(n);1===r.length&&V(r[0])?e.downloadFolder(e.state.selection):e.downloadFile(e.state.selection)},e.handleActionBarMoveClick=function(t){t.preventDefault(),e.beginAction("move",e.state.selection)},e.updateFilter=function(t){e.setState({nameFilter:t,searchResultsShown:20})},e.renderActions=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.props,o=r.icons,i=r.actionRenderer,a=r.onCreateFolder,l=r.onRenameFile,c=r.onRenameFolder,s=r.onDeleteFile,u=r.onDeleteFolder,f=r.onDownloadFile,p=r.onDownloadFolder,d=r.selectMoveTargetRenderer,h=e.getBrowserProps(),y=1===t.length&&V(t[0]);return m.a.createElement(i,Fn({browserProps:h,selectedItems:t,isFolder:y,icons:o,nameFilter:e.state.nameFilter,canCreateFolder:"function"==typeof a,onCreateFolder:e.handleActionBarAddFolderClick,canRenameFile:"function"==typeof l,onRenameFile:e.handleActionBarRenameClick,canRenameFolder:"function"==typeof c,onRenameFolder:e.handleActionBarRenameClick,canDeleteFile:"function"==typeof s,onDeleteFile:e.handleActionBarDeleteClick,canDeleteFolder:"function"==typeof u,onDeleteFolder:e.handleActionBarDeleteClick,canDownloadFile:"function"==typeof f,onDownloadFile:e.handleActionBarDownloadClick,canDownloadFolder:"function"==typeof p,onDownloadFolder:e.handleActionBarDownloadClick,canMove:"function"==typeof d,onMove:e.handleActionBarMoveClick},e.props.actionRendererProps,n))},e.handleMultipleDeleteSubmit=function(){var t=gn(G(e.state.selection),2),n=t[0],r=t[1];e.deleteFile(r),e.deleteFolder(n)},e.handleMoveTargetSelect=function(t){var n=gn(G(e.state.actionTargets),2),r=n[0],o=n[1];H({browserProps:e.getBrowserProps(),files:o,folders:r,target:t}),e.endAction()},e.handleFilesScroll=function(t){var n=t.target;"function"==typeof e.props.onScrolledToBottom&&n.scrollHeight-n.scrollTop===n.clientHeight&&e.props.onScrolledToBottom(t)},e}return t=i,(n=[{key:"componentDidMount",value:function(){if("table"===this.props.renderStyle&&this.props.nestChildren&&console.warn("Invalid settings: Cannot nest table children in file browser"),window.addEventListener("click",this.handleGlobalClick),this.props.localStorageKey)try{var e=JSON.parse(localStorage.getItem(this.props.localStorageKey));this.setState(e)}catch(e){console.warn(e)}}},{key:"componentDidUpdate",value:function(e,t){if(dn()(this.state.selection,t.selection)||this.props.onSelect(this.state.selection),this.props.localStorageKey){var n=mn()(this.state,["openFolders"]);localStorage.setItem(this.props.localStorageKey,JSON.stringify(n))}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleGlobalClick)}},{key:"updateBrowserProps",value:function(){void 0===this.browserProps&&(this.browserProps={}),Object.assign(this.browserProps,{nestChildren:this.props.nestChildren,fileRenderer:this.props.fileRenderer,fileRendererProps:this.props.fileRendererProps,folderRenderer:this.props.folderRenderer,folderRendererProps:this.props.folderRendererProps,confirmDeletionRenderer:this.props.confirmDeletionRenderer,confirmMultipleDeletionRenderer:this.props.confirmMultipleDeletionRenderer,icons:this.props.icons,multipleSelection:this.props.multipleSelection,files:this.props.files,visibleFiles:this.getVisibleFiles(),openFolders:this.state.openFolders,nameFilter:this.state.nameFilter,selection:this.state.selection,activeAction:this.state.activeAction,actionTargets:this.state.actionTargets,select:this.select,setSelection:this.setSelection,openFolder:this.openFolder,toggleFolder:this.toggleFolder,beginAction:this.beginAction,endAction:this.endAction,createFiles:this.props.onCreateFiles?this.createFiles:void 0,createFolder:this.props.onCreateFolder?this.createFolder:void 0,renameFile:this.props.onRenameFile?this.renameFile:void 0,renameFolder:this.props.onRenameFolder?this.renameFolder:void 0,moveFile:this.props.onMoveFile?this.moveFile:void 0,moveFolder:this.props.onMoveFolder?this.moveFolder:void 0,deleteFile:this.props.onDeleteFile?this.deleteFile:void 0,deleteFolder:this.props.onDeleteFolder?this.deleteFolder:void 0,renderActions:this.renderActions,getItemProps:xn})}},{key:"getBrowserProps",value:function(){return this.browserProps||this.updateBrowserProps(),this.browserProps}},{key:"renderActionBar",value:function(e){var t,n=this.props,r=n.canFilter,o=n.filterRendererProps,i=n.filterRenderer;r&&(t=m.a.createElement(i,Fn({value:this.state.nameFilter,updateFilter:this.updateFilter},o)));var a=this.renderActions(e);return m.a.createElement("div",{className:"action-bar"},t,a)}},{key:"renderFiles",value:function(e,t){var n=this,r=this.props,o=r.fileRenderer,i=r.fileRendererProps,a=r.folderRenderer,l=r.folderRendererProps,c=this.getBrowserProps(),s=[];return e.map((function(e){var r=Pn(Pn({},c.getItemProps(e,c)),{},{depth:n.state.nameFilter?0:t});V(e)?(!n.props.showFoldersOnFilter&&n.state.nameFilter||s.push(m.a.createElement(a,Fn({},e,r,{browserProps:c},l))),(n.state.nameFilter||r.isOpen&&!c.nestChildren)&&(s=s.concat(n.renderFiles(e.children,t+1)))):s.push(m.a.createElement(o,Fn({},e,r,{browserProps:c},i)))})),s}},{key:"getFiles",value:function(){var e=this.props.files.concat([]);if("createFolder"===this.state.activeAction&&e.push({key:this.state.actionTargets[0],size:0,draft:!0}),this.state.nameFilter){var t=[],n=this.state.nameFilter.toLowerCase().split(" ");e.map((function(e){var r=!1;n.map((function(t){-1===e.key.toLowerCase().trim().indexOf(t)&&(r=!0)})),r||t.push(e)})),e=t}if("function"==typeof this.props.group)e=this.props.group(e,"");else{var r=[];e.map((function(e){V(e)||r.push(e)})),e=r}return"function"==typeof this.props.sort&&(e=this.props.sort(e)),e}},{key:"flattenFiles",value:function(e,t){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=On(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;V(o)?(!this.props.showFoldersOnFilter&&this.state.nameFilter||t.push(o),(this.state.nameFilter||o.key in this.state.openFolders&&!this.props.nestChildren)&&this.flattenFiles(o.children,t)):t.push(o)}}catch(e){r.e(e)}finally{r.f()}}},{key:"getVisibleFiles",value:function(){var e=[];return this.flattenFiles(this.getFiles(),e),e}},{key:"getSelectedItems",value:function(e){var t=this.state.selection,n=[];return e.map((function e(r){t.includes(r.key)&&n.push(r),r.children&&r.children.map(e)})),n}},{key:"render",value:function(){var e=this;this.updateBrowserProps();var t,n,r=this.getBrowserProps(),o={browserProps:r,fileKey:"",fileCount:r.visibleFiles.length,selectedCount:this.state.selection.length},i=this.getFiles(),a=this.getSelectedItems(i),l=this.renderFiles(i,0);switch(this.props.renderStyle){case"table":l.length?this.state.nameFilter&&l.length>(l=l.slice(0,this.state.searchResultsShown)).length&&l.push(m.a.createElement("tr",{key:"show-more"},m.a.createElement("td",{colSpan:100},m.a.createElement("a",{onClick:this.handleShowMoreClick,href:"#"},"Show more results")))):l=this.state.nameFilter?m.a.createElement("tr",null,m.a.createElement("td",{colSpan:100},'No files matching "',this.state.nameFilter,'".')):m.a.createElement("tr",null,m.a.createElement("td",{colSpan:100},this.props.noFilesMessage)),this.props.headerRenderer&&(n=m.a.createElement("thead",null,m.a.createElement(this.props.headerRenderer,Fn({},o,this.props.headerRendererProps)))),t=m.a.createElement("table",{cellSpacing:"0",cellPadding:"0"},n,m.a.createElement("tbody",null,l));break;case"list":var c;if(l.length)this.state.nameFilter&&l.length>(l=l.slice(0,this.state.searchResultsShown)).length&&(c=m.a.createElement("a",{onClick:this.handleShowMoreClick,href:"#"},"Show more results")),l=m.a.createElement("div",null,m.a.createElement("ul",null,l),c);else l=this.state.nameFilter?m.a.createElement("p",{className:"empty"},'No files matching "',this.state.nameFilter,'"'):m.a.createElement("p",{className:"empty"},"No files.");this.props.headerRenderer&&(n=m.a.createElement(this.props.headerRenderer,Fn({},o,this.props.headerRendererProps))),t=m.a.createElement("div",null,n,l)}var s=this.props.confirmDeletionRenderer,u=this.props.selectMoveTargetRenderer,f=this.state.selection[this.state.selection.length-1];return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"rendered-react-keyed-file-browser",ref:function(t){e.browserRef=t}},this.props.actions,m.a.createElement("div",{className:"rendered-file-browser"},this.props.showActionBar&&this.renderActionBar(a),"delete"===this.state.activeAction&&m.a.createElement(s,{handleDeleteSubmit:this.handleMultipleDeleteSubmit,onCancel:this.endAction,items:this.state.selection}),"move"===this.state.activeAction&&m.a.createElement(u,Fn({targets:this.state.actionTargets,onCancel:this.endAction,onSelect:this.handleMoveTargetSelect},this.props.selectMoveTargetRendererProps)),m.a.createElement("div",{className:"files",onScroll:this.handleFilesScroll},t)),this.props.detailRenderer&&m.a.createElement(this.props.detailRenderer,Fn({fileKey:f},this.props.detailRendererProps))))}}])&&jn(t.prototype,n),r&&jn(t,r),i}(m.a.Component);Mn.propTypes={files:d.a.arrayOf(d.a.shape({key:d.a.string.isRequired,modified:d.a.any,size:d.a.number})).isRequired,actions:d.a.node,showActionBar:d.a.bool.isRequired,canFilter:d.a.bool.isRequired,showFoldersOnFilter:d.a.bool,noFilesMessage:d.a.string,group:d.a.func.isRequired,sort:d.a.func.isRequired,localStorageKey:d.a.string,icons:d.a.shape({Folder:d.a.element,FolderOpen:d.a.element,File:d.a.element,PDF:d.a.element,Image:d.a.element,Delete:d.a.element,Rename:d.a.element,Loading:d.a.element,Download:d.a.element}),nestChildren:d.a.bool.isRequired,renderStyle:d.a.oneOf(["list","table"]).isRequired,startOpen:d.a.bool.isRequired,multipleSelection:d.a.bool.isRequired,headerRenderer:d.a.func,headerRendererProps:d.a.object,filterRenderer:d.a.func,filterRendererProps:d.a.object,fileRenderer:d.a.func,fileRendererProps:d.a.object,folderRenderer:d.a.func,folderRendererProps:d.a.object,detailRenderer:d.a.func,detailRendererProps:d.a.object,actionRenderer:d.a.func,actionRendererProps:d.a.object,confirmDeletionRenderer:d.a.func,selectMoveTargetRenderer:d.a.func,selectMoveTargetRendererProps:d.a.object,onCreateFiles:d.a.oneOfType([d.a.func,d.a.bool]),onCreateFolder:d.a.oneOfType([d.a.func,d.a.bool]),onMoveFile:d.a.oneOfType([d.a.func,d.a.bool]),onMoveFolder:d.a.oneOfType([d.a.func,d.a.bool]),onRenameFile:d.a.oneOfType([d.a.func,d.a.bool]),onRenameFolder:d.a.oneOfType([d.a.func,d.a.bool]),onDeleteFile:d.a.oneOfType([d.a.func,d.a.bool]),onDeleteFolder:d.a.oneOfType([d.a.func,d.a.bool]),onDownloadFile:d.a.oneOfType([d.a.func,d.a.bool]),onDownloadFolder:d.a.oneOfType([d.a.func,d.a.bool]),onSelect:d.a.func,onFolderOpen:d.a.func,onFolderClose:d.a.func,onScrolledToBottom:d.a.func},Mn.defaultProps={showActionBar:!0,canFilter:!0,showFoldersOnFilter:!1,noFilesMessage:"No files.",group:Jt,sort:on,nestChildren:!1,renderStyle:"table",startOpen:!1,multipleSelection:!0,headerRenderer:je,headerRendererProps:{},filterRenderer:M,filterRendererProps:{},fileRenderer:lt,fileRendererProps:{},folderRenderer:zt,folderRendererProps:{},detailRenderer:E,detailRendererProps:{},actionRenderer:fn,actionRendererProps:{},confirmDeletionRenderer:Gt,selectMoveTargetRenderer:null,selectMoveTargetRendererProps:{},icons:{},onSelect:function(e){},onFolderOpen:function(e){},onFolderClose:function(e){}};var In=Object(v.DragDropContext)(b.a)(un=function(e){kn(n,e);var t=Nn(n);function n(){return En(this,n),t.apply(this,arguments)}return n}(Mn))||un,Kn=function(e){var t=4===e?"fa":"fas",n=4===e?["FontAwesome",'"FontAwesome"']:['"Font Awesome 5 Free"','"Font Awesome 5 Pro"'],r=!1,o=document.createElement("span");o.className=t,o.style.display="none",document.body.insertBefore(o,document.body.firstChild);var i,a;return n.includes((i=o,a="font-family",window.getComputedStyle(i,null).getPropertyValue(a)))?r=!0:console.warn("Font Awesome ".concat(e," was not detected but Font Awesome ").concat(e," icons have been requested for `react-object-list`")),document.body.removeChild(o),r},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;switch(e){case 4:return Kn(4),{File:m.a.createElement("i",{className:"fa fa-file-o","aria-hidden":"true"}),Image:m.a.createElement("i",{className:"fa fa-file-image-o","aria-hidden":"true"}),Video:m.a.createElement("i",{className:"fa fa-file-video-o","aria-hidden":"true"}),Audio:m.a.createElement("i",{className:"fa fa-file-audio-o","aria-hidden":"true"}),Archive:m.a.createElement("i",{className:"fa fa-file-archive-o","aria-hidden":"true"}),Word:m.a.createElement("i",{className:"fa fa-file-word-o","aria-hidden":"true"}),Excel:m.a.createElement("i",{className:"fa fa-file-excel-o","aria-hidden":"true"}),PowerPoint:m.a.createElement("i",{className:"fa fa-file-powerpoint-o","aria-hidden":"true"}),Text:m.a.createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"}),PDF:m.a.createElement("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"}),Rename:m.a.createElement("i",{className:"fa fa-i-cursor","aria-hidden":"true"}),Folder:m.a.createElement("i",{className:"fa fa-folder-o","aria-hidden":"true"}),FolderOpen:m.a.createElement("i",{className:"fa fa-folder-open-o","aria-hidden":"true"}),Delete:m.a.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"}),Loading:m.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin","aria-hidden":"true"}),Download:m.a.createElement("i",{className:"fa fa-download","aria-hidden":"true"})};case 5:return Kn(5),{File:m.a.createElement("i",{className:"far fa-file","aria-hidden":"true"}),Image:m.a.createElement("i",{className:"far fa-file-image","aria-hidden":"true"}),Video:m.a.createElement("i",{className:"far fa-file-video","aria-hidden":"true"}),Audio:m.a.createElement("i",{className:"far fa-file-audio","aria-hidden":"true"}),Archive:m.a.createElement("i",{className:"far fa-file-archive","aria-hidden":"true"}),Word:m.a.createElement("i",{className:"far fa-file-word","aria-hidden":"true"}),Excel:m.a.createElement("i",{className:"far fa-file-excel","aria-hidden":"true"}),PowerPoint:m.a.createElement("i",{className:"far fa-file-powerpoint","aria-hidden":"true"}),Text:m.a.createElement("i",{className:"far fa-file-alt","aria-hidden":"true"}),PDF:m.a.createElement("i",{className:"far fa-file-pdf","aria-hidden":"true"}),Rename:m.a.createElement("i",{className:"fas fa-i-cursor","aria-hidden":"true"}),Folder:m.a.createElement("i",{className:"far fa-folder","aria-hidden":"true"}),FolderOpen:m.a.createElement("i",{className:"far fa-folder-open","aria-hidden":"true"}),Delete:m.a.createElement("i",{className:"far fa-trash-alt","aria-hidden":"true"}),Loading:m.a.createElement("i",{className:"fas fa-circle-notch fa-spin","aria-hidden":"true"}),Download:m.a.createElement("i",{className:"fas fa-download","aria-hidden":"true"})};default:console.warn("Could not find config for version ".concat(e),"Accepted versions are: 4, 5","Please make an issue in `react-object-list` to fix this.")}};t.default=In}])}));